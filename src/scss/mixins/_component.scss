/// Create a component based off the main module
///
/// @author [@esr360](http://twitter.com/esr360)
/// @group Synergy
/// @access public
///
/// @param {string|list} $components - The component or components to be used
///
/// @example
///
///     @include module('header') {
///         @include component('wrapper') {
///             ...
///         }
///     }
///
///     <div class="header_wrapper">...</div>
@mixin component($components: null) {

    $selectors: '[class*="#{$module}_"]';

    @if $components {

        // Get target namespace
        $parents: str-replace(inspect(nth(&, 1)), '.', '');
        $parents: str-replace($parents, '[class*="', '');
        $parents: str-replace($parents, '-"]', '');
        $parents: str-replace($parents, '"]', '');

        $selectors: ();

        @each $component in $components {
            // Create the naked class selectors
            $selectors: if(
                nth(&, 1) + unquote('') == '.#{$module}', (
                    join($selectors, '.#{$module}_#{$component}', comma)
                ), (
                    join($selectors, '.#{$parents}_#{$component}', comma)
                )
            );
            // Create the attribute wildcard selectors
            $selectors: if(
                nth(&, 1) + unquote('') == '.#{$module}', (
                    join($selectors, '[class*="#{$module}_#{$component}-"]', comma)
                ), (
                    join($selectors, '[class*="#{$parents}_#{$component}-"]', comma)
                )
            );
        }

    }

    @at-root {
        #{$selectors} {
            @content;
        }
    }

}

/// Alias for component() mixin
///
/// @author [@esr360](http://twitter.com/esr360)
/// @group Synergy
/// @access public
///
/// @param {string|list} $components - The component(s) you wish to create
@mixin components($components) {
    @include component($components) {
        @content;
    }
}